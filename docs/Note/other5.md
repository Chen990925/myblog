---
group:
  title: 计算机网络
  order: 8
title: 浏览器安全XSS、CSRF
---

# XSS、CSRF

## XSS 网络攻击

在目标页面注入恶意代码，用户在访问目标页面时执行恶意代码，从而使得攻击者可以进行敏感的恶意操作。
主要有下面三种攻击方式：

- 储存型 XSS 攻击：攻击者将恶意代码储存到服务端，用户访问该页面时候，服务端返回对应资源，其中就包括恶意代码。浏览器执行该恶意代码。比如：论坛。
- 反射型 XSS 攻击：攻击者通过将恶意代码拼接到 URL 后，用户点击访问后，服务端返回对应资源。url 后的恶意代码被浏览器解析并执行。比如搜索框。
- DOM 型 XSS 攻击：攻击者通过在 DOM 插入恶意代码，浏览器执行。比如：URL 后的#字符，它主要表示页面的锚点。如果 js 代码中有从 url 中获取字符并且用该字符修改页面，就容易被攻击者利用。

## 如何防护 XSS 网络攻击

储存型和反射型 XSS 攻击都属于服务端的防护范围。一般采用 HTML 转义库。
DOM 型 XSS 攻击：避免在字符串中去拼接不可信数据，保证拼接数据的可信度。

## CSRF（跨站请求伪造）

登录态 Cookie 的 key 是浏览器自动携带的，key 一般是会话 key，即浏览器不关闭就一直存在。用户在没有关闭浏览器的情况下打开了一个黑客页面，该黑客页面发送一个 http 请求到用户登录过的网站，就能以用户的身份去进行一些敏感恶意操作。

俩个注意点：

- 黑客它不能读写 cookie，只是利用了浏览器会自动携带 cookie 这点。
- 黑客是跨域请求，即使存在浏览器的同源政策，img、link 的 get 请求/form 表单的 get/post 请求也是拿到数据和展示数据的。

## 如何防护 CSRF

- 白名单 origin、referrer：去设置白名单网址。
- token 参数：下发一个 token 参数，在 http 请求参数中带上这个 token 参数。主要利用了非同源不能读写 cookie 这点。
